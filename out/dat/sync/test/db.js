// Compiled by ClojureScript 1.9.542 {}
goog.provide('dat.sync.test.db');
goog.require('cljs.core');
goog.require('dat.sync.db');
goog.require('dat.sync.db.datascript');
goog.require('dat.sync.db.datahike');
goog.require('cljs.spec.alpha');
goog.require('cljs.test');
cljs.spec.alpha.check_asserts.call(null,true);
/**
 * This function is only needed while keyword ident lookup does not work in datascript/datahike
 */
dat.sync.test.db.ent__GT_ident = (function dat$sync$test$db$ent__GT_ident(e){
if((e instanceof cljs.core.Keyword)){
return e;
} else {
return new cljs.core.Keyword("db","ident","db/ident",-737096).cljs$core$IFn$_invoke$arity$1(e);
}
});
dat.sync.test.db.unique = (function dat$sync$test$db$unique(db,eid){
return dat.sync.test.db.ent__GT_ident.call(null,new cljs.core.Keyword("db","unique","db/unique",329396388).cljs$core$IFn$_invoke$arity$1(dat.sync.db.entity.call(null,db,eid)));
});
dat.sync.test.db.with_monkeys = (function dat$sync$test$db$with_monkeys(db){
return dat.sync.db.db_with.call(null,dat.sync.db.db_with.call(null,dat.sync.db.db_with.call(null,dat.sync.db.db_with.call(null,db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874),new cljs.core.Keyword("db","valueType","db/valueType",1827971944),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.type","ref","db.type/ref",-1728373079)], null),new cljs.core.Keyword("db","cardinality","db/cardinality",-104975659),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.cardinality","many","db.cardinality/many",772806234)], null)], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),new cljs.core.Keyword("db","valueType","db/valueType",1827971944),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.type","string","db.type/string",1432572808)], null),new cljs.core.Keyword("db","unique","db/unique",329396388),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)], null),new cljs.core.Keyword("db","cardinality","db/cardinality",-104975659),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.cardinality","one","db.cardinality/one",1428352190)], null)], null)], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","id","db/id",-1388397098),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874)], null),new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","buddy","dat.sync.test.db/buddy",361165860)], null)], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Spider Guy"], null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Mr Bosco",new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Spider Guy"], null)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"The Verve"], null)], null));
});
dat.sync.test.db.test_conn = (function dat$sync$test$db$test_conn(conn,db){
try{var value__11645__auto___41860 = dat.sync.db.conn_QMARK_.call(null,conn);
if(cljs.core.truth_(value__11645__auto___41860)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","conn?","d/conn?",1807756006,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41860,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","conn?","d/conn?",1807756006,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41860,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41856){var t__11680__auto___41861 = e41856;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","conn?","d/conn?",1807756006,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41861,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var value__11645__auto___41862 = dat.sync.db.db_QMARK_.call(null,dat.sync.db.db.call(null,conn));
if(cljs.core.truth_(value__11645__auto___41862)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db","d/db",-1661184790,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null))),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41862,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db","d/db",-1661184790,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null))),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41862,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41857){var t__11680__auto___41863 = e41857;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db","d/db",-1661184790,null),new cljs.core.Symbol(null,"conn","conn",1918841190,null))),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41863,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var value__11645__auto___41864 = dat.sync.db.db_QMARK_.call(null,db);
if(cljs.core.truth_(value__11645__auto___41864)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41864,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto___41864,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41858){var t__11680__auto___41865 = e41858;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),new cljs.core.Symbol(null,"db","db",-1661185010,null)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41865,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var value__11645__auto__ = dat.sync.db.db_QMARK_.call(null,dat.sync.db.db_with.call(null,db,cljs.core.PersistentVector.EMPTY));
if(cljs.core.truth_(value__11645__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.PersistentVector.EMPTY)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.PersistentVector.EMPTY)),new cljs.core.Keyword(null,"actual","actual",107306363),value__11645__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return value__11645__auto__;
}catch (e41859){var t__11680__auto__ = e41859;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol("d","db?","d/db?",1715867440,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.PersistentVector.EMPTY)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_conn_datascript = (function dat$sync$test$db$test_conn_datascript(){
return cljs.test.test_var.call(null,dat.sync.test.db.test_conn_datascript.cljs$lang$var);
});
dat.sync.test.db.test_conn_datascript.cljs$lang$test = (function (){
var conn = dat.sync.db.datascript.create_conn.call(null);
var db = dat.sync.db.datascript.empty_db.call(null);
return dat.sync.test.db.test_conn.call(null,conn,db);
});

dat.sync.test.db.test_conn_datascript.cljs$lang$var = new cljs.core.Var(function(){return dat.sync.test.db.test_conn_datascript;},new cljs.core.Symbol("dat.sync.test.db","test-conn-datascript","dat.sync.test.db/test-conn-datascript",106230069,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"dat.sync.test.db","dat.sync.test.db",1207080177,null),new cljs.core.Symbol(null,"test-conn-datascript","test-conn-datascript",1016334647,null),"test/cljc/dat/sync/test/db.cljc",30,1,54,54,cljs.core.List.EMPTY,null,(cljs.core.truth_(dat.sync.test.db.test_conn_datascript)?dat.sync.test.db.test_conn_datascript.cljs$lang$test:null)]));
dat.sync.test.db.test_base_schema = (function dat$sync$test$db$test_base_schema(db){
try{var values__11642__auto__ = (function (){var x__11153__auto__ = dat.sync.test.db.unique.call(null,db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null));
return cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),x__11153__auto__);
})();
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"unique","unique",1969928809,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null)),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"unique","unique",1969928809,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null)),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41867){var t__11680__auto__ = e41867;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"unique","unique",1969928809,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null)),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_base_schema_datascript = (function dat$sync$test$db$test_base_schema_datascript(){
return cljs.test.test_var.call(null,dat.sync.test.db.test_base_schema_datascript.cljs$lang$var);
});
dat.sync.test.db.test_base_schema_datascript.cljs$lang$test = (function (){
return dat.sync.test.db.test_base_schema.call(null,dat.sync.db.datascript.empty_db.call(null));
});

dat.sync.test.db.test_base_schema_datascript.cljs$lang$var = new cljs.core.Var(function(){return dat.sync.test.db.test_base_schema_datascript;},new cljs.core.Symbol("dat.sync.test.db","test-base-schema-datascript","dat.sync.test.db/test-base-schema-datascript",15344051,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"dat.sync.test.db","dat.sync.test.db",1207080177,null),new cljs.core.Symbol(null,"test-base-schema-datascript","test-base-schema-datascript",-22406731,null),"test/cljc/dat/sync/test/db.cljc",37,1,76,76,cljs.core.List.EMPTY,null,(cljs.core.truth_(dat.sync.test.db.test_base_schema_datascript)?dat.sync.test.db.test_base_schema_datascript.cljs$lang$test:null)]));
dat.sync.test.db.test_keyword_lookup_ref = (function dat$sync$test$db$test_keyword_lookup_ref(db){
try{var values__11642__auto___41872 = (function (){var x__11153__auto__ = dat.sync.db.entity.call(null,db,new cljs.core.Keyword("db","ident","db/ident",-737096));
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = dat.sync.db.entity.call(null,db,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null));
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto___41873 = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto___41872);
if(cljs.core.truth_(result__11643__auto___41873)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto___41872),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto___41872);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41870){var t__11680__auto___41874 = e41870;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41874,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var values__11642__auto__ = (function (){var x__11153__auto__ = dat.sync.db.pull.call(null,db,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null),new cljs.core.Keyword("db","ident","db/ident",-737096));
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = dat.sync.db.pull.call(null,db,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null));
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41871){var t__11680__auto__ = e41871;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.Keyword("db","ident","db/ident",-737096)),cljs.core.list(new cljs.core.Symbol("d","pull","d/pull",779986566,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),cljs.core.list(new cljs.core.Symbol(null,"quote","quote",1377916282,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db","ident","db/ident",-737096)], null))),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_ident__GT_keyword = (function dat$sync$test$db$test_ident__GT_keyword(db){
try{var values__11642__auto__ = (function (){var x__11153__auto__ = new cljs.core.Keyword("db","unique","db/unique",329396388).cljs$core$IFn$_invoke$arity$1(dat.sync.db.entity.call(null,db,new cljs.core.Keyword("db","ident","db/ident",-737096)));
return cljs.core._conj.call(null,cljs.core._conj.call(null,cljs.core.List.EMPTY,new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),x__11153__auto__);
})();
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("db","unique","db/unique",329396388),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096))),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("db","unique","db/unique",329396388),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096))),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41876){var t__11680__auto__ = e41876;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("db","unique","db/unique",329396388),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Keyword("db","ident","db/ident",-737096))),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_alias = (function dat$sync$test$db$test_alias(db){
var troop = dat.sync.test.db.with_monkeys.call(null,db);
var mr_bosco = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Mr Bosco"], null);
try{var values__11642__auto__ = (function (){var x__11153__auto__ = new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874).cljs$core$IFn$_invoke$arity$1(dat.sync.db.entity.call(null,troop,mr_bosco));
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = new cljs.core.Keyword("dat.sync.test.db","buddy","dat.sync.test.db/buddy",361165860).cljs$core$IFn$_invoke$arity$1(dat.sync.db.entity.call(null,troop,mr_bosco));
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null))),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","buddy","dat.sync.test.db/buddy",361165860),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null)))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null))),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","buddy","dat.sync.test.db/buddy",361165860),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null)))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41878){var t__11680__auto__ = e41878;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","friend","dat.sync.test.db/friend",-1524196874),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null))),cljs.core.list(new cljs.core.Keyword("dat.sync.test.db","buddy","dat.sync.test.db/buddy",361165860),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.Symbol(null,"troop","troop",1137947716,null),new cljs.core.Symbol(null,"mr-bosco","mr-bosco",-66475435,null)))),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_fn = (function dat$sync$test$db$test_fn(db,n){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),n], null)], null);
});
dat.sync.test.db.indirection = (function dat$sync$test$db$indirection(db,n){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),n], null)], null);
});
dat.sync.test.db.local_call = (function dat$sync$test$db$local_call(db,n){
return dat.sync.test.db.test_fn.call(null,db,n);
});
dat.sync.test.db.test_function = (function dat$sync$test$db$test_function(){
return cljs.test.test_var.call(null,dat.sync.test.db.test_function.cljs$lang$var);
});
dat.sync.test.db.test_function.cljs$lang$test = (function (){
try{var values__11642__auto___41882 = (function (){var x__11153__auto__ = dat.sync.test.db.test_fn.call(null,null,"name");
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto___41883 = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto___41882);
if(cljs.core.truth_(result__11643__auto___41883)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"test-fn","test-fn",160089702,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto___41882),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"test-fn","test-fn",160089702,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto___41882);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41879){var t__11680__auto___41884 = e41879;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"test-fn","test-fn",160089702,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41884,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var values__11642__auto___41885 = (function (){var x__11153__auto__ = dat.sync.test.db.indirection.call(null,null,"name");
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),"name"], null)], null);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto___41886 = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto___41885);
if(cljs.core.truth_(result__11643__auto___41886)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"indirection","indirection",-772469434,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto___41885),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"indirection","indirection",-772469434,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto___41885);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

}catch (e41880){var t__11680__auto___41887 = e41880;
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"indirection","indirection",-772469434,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto___41887,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}
try{var values__11642__auto__ = (function (){var x__11153__auto__ = dat.sync.test.db.local_call.call(null,null,"name");
return cljs.core._conj.call(null,(function (){var x__11153__auto____$1 = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto____$1);
})(),x__11153__auto__);
})();
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"local-call","local-call",-934862481,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"local-call","local-call",-934862481,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41881){var t__11680__auto__ = e41881;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),cljs.core.list(new cljs.core.Symbol(null,"local-call","local-call",-934862481,null),null,"name"),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"name"], null)], null)),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});

dat.sync.test.db.test_function.cljs$lang$var = new cljs.core.Var(function(){return dat.sync.test.db.test_function;},new cljs.core.Symbol("dat.sync.test.db","test-function","dat.sync.test.db/test-function",1927249428,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"dat.sync.test.db","dat.sync.test.db",1207080177,null),new cljs.core.Symbol(null,"test-function","test-function",1486833170,null),"test/cljc/dat/sync/test/db.cljc",23,1,161,161,cljs.core.List.EMPTY,null,(cljs.core.truth_(dat.sync.test.db.test_function)?dat.sync.test.db.test_function.cljs$lang$test:null)]));
dat.sync.test.db.with_fns = (function dat$sync$test$db$with_fns(db){
return dat.sync.db.db_with.call(null,dat.sync.db.db_with.call(null,db,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),new cljs.core.Keyword("db","valueType","db/valueType",1827971944),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.type","string","db.type/string",1432572808)], null),new cljs.core.Keyword("db","cardinality","db/cardinality",-104975659),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.cardinality","one","db.cardinality/one",1428352190)], null),new cljs.core.Keyword("db","unique","db/unique",329396388),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("db.unique","identity","db.unique/identity",1675950722)], null)], null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","test-fn","dat.sync.test.db/test-fn",-2055100387),new cljs.core.Keyword("db","fn","db/fn",-1175261470),dat.sync.test.db.test_fn], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("db","ident","db/ident",-737096),new cljs.core.Keyword("dat.sync.test.db","indirection","dat.sync.test.db/indirection",-1435705603),new cljs.core.Keyword("db","fn","db/fn",-1175261470),dat.sync.test.db.indirection], null)], null));
});
dat.sync.test.db.test_function_indirection = (function dat$sync$test$db$test_function_indirection(db){
var db__$1 = dat.sync.test.db.with_fns.call(null,db);
try{var values__11642__auto__ = cljs.core._conj.call(null,(function (){var x__11153__auto__ = new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525).cljs$core$IFn$_invoke$arity$1(dat.sync.db.entity.call(null,dat.sync.db.db_with.call(null,dat.sync.test.db.with_fns.call(null,db__$1),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","indirection","dat.sync.test.db/indirection",-1435705603),"Test Name"], null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Test Name"], null)));
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),"Test Name");
var result__11643__auto__ = cljs.core.apply.call(null,cljs.core._EQ_,values__11642__auto__);
if(cljs.core.truth_(result__11643__auto__)){
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"pass","pass",1574159993),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),"Test Name",cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"with-fns","with-fns",771565955,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","indirection","dat.sync.test.db/indirection",-1435705603),"Test Name"], null)], null)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Test Name"], null)),new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core.cons.call(null,cljs.core._EQ_,values__11642__auto__),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
} else {
cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"fail","fail",1706214930),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),"Test Name",cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"with-fns","with-fns",771565955,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","indirection","dat.sync.test.db/indirection",-1435705603),"Test Name"], null)], null)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Test Name"], null)),new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525))),new cljs.core.Keyword(null,"actual","actual",107306363),cljs.core._conj.call(null,(function (){var x__11153__auto__ = cljs.core.cons.call(null,new cljs.core.Symbol(null,"=","=",-1501502141,null),values__11642__auto__);
return cljs.core._conj.call(null,cljs.core.List.EMPTY,x__11153__auto__);
})(),new cljs.core.Symbol(null,"not","not",1044554643,null)),new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}

return result__11643__auto__;
}catch (e41889){var t__11680__auto__ = e41889;
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"error","error",-978969032),new cljs.core.Keyword(null,"expected","expected",1583670997),cljs.core.list(new cljs.core.Symbol(null,"=","=",-1501502141,null),"Test Name",cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),new cljs.core.Symbol(null,"db","db",-1661185010,null),new cljs.core.Symbol(null,"with-fns","with-fns",771565955,null),cljs.core.list(new cljs.core.Symbol("d","db-with","d/db-with",233241862,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","indirection","dat.sync.test.db/indirection",-1435705603),"Test Name"], null)], null)),cljs.core.list(new cljs.core.Symbol("d","entity","d/entity",1189561095,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525),"Test Name"], null)),new cljs.core.Keyword("dat.sync.test.db","name","dat.sync.test.db/name",-1868269525))),new cljs.core.Keyword(null,"actual","actual",107306363),t__11680__auto__,new cljs.core.Keyword(null,"message","message",-406056002),null], null));
}});
dat.sync.test.db.test_function_indirection_datascript = (function dat$sync$test$db$test_function_indirection_datascript(){
return cljs.test.test_var.call(null,dat.sync.test.db.test_function_indirection_datascript.cljs$lang$var);
});
dat.sync.test.db.test_function_indirection_datascript.cljs$lang$test = (function (){
return dat.sync.test.db.test_function_indirection.call(null,dat.sync.db.datascript.empty_db.call(null));
});

dat.sync.test.db.test_function_indirection_datascript.cljs$lang$var = new cljs.core.Var(function(){return dat.sync.test.db.test_function_indirection_datascript;},new cljs.core.Symbol("dat.sync.test.db","test-function-indirection-datascript","dat.sync.test.db/test-function-indirection-datascript",-28758574,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"dat.sync.test.db","dat.sync.test.db",1207080177,null),new cljs.core.Symbol(null,"test-function-indirection-datascript","test-function-indirection-datascript",-737602092,null),"test/cljc/dat/sync/test/db.cljc",46,1,190,190,cljs.core.List.EMPTY,null,(cljs.core.truth_(dat.sync.test.db.test_function_indirection_datascript)?dat.sync.test.db.test_function_indirection_datascript.cljs$lang$test:null)]));

//# sourceMappingURL=db.js.map