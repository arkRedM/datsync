{"version":3,"file":"\/home\/bamarco\/dev\/datsync\/out\/dat\/sync\/datascript_pr.js","sources":["datascript_pr.cljc"],"lineCount":522,"mappings":"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\/C,IAAME,SAAO,AAACR,+CAAc9C,GAAGqD;AAA\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","names":["var_args","args50704","len__11440__auto__","i__11441__auto__","G__50706","dat.sync.datascript-pr\/poor-mans-kw-refs","js\/Error","schema-entity","pred?","entity","cljs.core\/map?","cljs.core\/into","cljs.core\/map","p__50707","vec__50708","cljs.core\/nth","k","v","cljs.core\/not","dat.sync.datascript-pr\/current-tempid","cljs.core\/atom","args50716","G__50718","dat.sync.datascript-pr\/roll!","counter","lowest","highest","p1__50715#","cljs.core\/swap!","nextt","cljs.core\/=","dat.sync.datascript-pr\/tempid","part","dat.sync.datascript-pr\/entity","db","eid","datascript.core\/entity","cljs.core\/Keyword","p__50723","map__50726","cljs.core\/PROTOCOL_SENTINEL","cljs.core\/apply","cljs.core\/hash-map","cljs.core\/get","dat.sync.datascript-pr\/transact-tx-data","initial-report","tx-meta","initial-es","middleware","or__10219__auto__","cljs.core\/identity","datascript.db\/transact-tx-data","dat.sync.datascript-pr\/validate-schema-change","db-before","db-after","args__11447__auto__","argseq__11448__auto__","cljs.core\/IndexedSeq","dat.sync.datascript-pr\/replace-schema","p__50731","map__50732","seq50728","G__50729","cljs.core\/first","cljs.core\/next","G__50730","schema","options","validate?","datascript.db\/init-db","datascript.db\/-datoms","p__50737","vec__50741","dat.sync.datascript-pr\/schema-datom?","e","a","tx","add?","dat.sync.datascript-pr\/supported-schema-value?","G__50745","dat.sync.datascript-pr\/resolve-ident","ident-eid","resolved-eid","datascript.db\/entid-strict","datascript.db\/-search","dat.sync.datascript-pr\/resolve-enum","attr","value","rident","args50747","G__50749","dat.sync.datascript-pr\/conj-schema-datom","p__50750","vec__50751","datascript.db\/empty-db","_","attr-ident","resolved-value","cljs.core\/assoc-in","dat.sync.datascript-pr\/schema-middleware","transact","report","txs","map__50760","tx-data","db-after'","cljs.core\/transduce","cljs.core\/filter","cljs.core\/assoc","dat.sync.datascript-pr\/schema-meta","args50762","G__50764","dat.sync.datascript-pr\/with","datascript.db\/db?","datascript.core\/is-filtered","cljs.core\/ex-info","datascript.db\/map->TxReport","args50769","G__50771","dat.sync.datascript-pr\/db-with","dat.sync.datascript-pr\/-transact!","conn","datascript.core\/conn?","cljs.core\/deref","r","cljs.core\/reset!","args50776","G__50778","dat.sync.datascript-pr\/transact!","seq__50779","cljs.core\/seq","chunk__50780","count__50781","i__50782","vec__50783","cljs.core\/-nth","temp__6738__auto__","cljs.core\/chunked-seq?","c__11130__auto__","cljs.core\/chunk-first","cljs.core\/chunk-rest","cljs.core\/count","vec__50786","callback","cljs.core\/meta","dat.sync.datascript-pr\/schema-db","datascript.core\/empty-db","datahike.middleware\/bare-bones-schema","datahike.middleware\/enum-idents","cljs.core\/mapv","datahike.middleware\/schema-idents","dat.sync.datascript-pr\/create-schema-conn","datascript.core\/conn-from-db"]}